{% extends "core/base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/admin.css' %}">
{% endblock %}

{% block title %}Administration Â· InSillyClo{% endblock %}

{% block content %}
<div class="card">
  <h1 class="page-title">Administration</h1>
  
  {% if user.is_authenticated %}
    <p class="muted">Admin dashboard for InSillyClo platform management.</p>

    {% if user.is_staff or user.is_superuser %}
      <div class="section">
        <h2 class="section-title">Management</h2>
        <div class="admin-links">
          <a href="{% url 'admin:index' %}" class="admin-link">
            <div>
              <div class="link-title">Manage Campaigns</div>
              <div class="link-description">Full system administration interface</div>
            </div>
          </a>
          
          <a href="{% url 'accounts:admin_team_list' %}" class="admin-link">
            <div>
              <div class="link-title">Teams</div>
              <div class="link-description">View and manage team structures</div>
            </div>
          </a>
          

          <a href="{% url 'publications:admin_requests' %}" class="admin-link">
            <div>
              <div class="link-title">Publication Requests</div>
              <div class="link-description">
                View all publication requests: approved, pending cheffe, pending admin, and refused. Administrators can approve or reject requests that are pending admin.
              </div>
            </div>
          </a>
        </div>
      </div>
    {% endif %}

    {% if user.is_superuser %}
      <div class="section">
        <h2 class="section-title">Platform Statistics</h2>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value">{{ user_count|default:"0" }}</div>
            <div class="stat-label">Users</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">{{ template_count|default:"0" }}</div>
            <div class="stat-label">Templates</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">{{ simulation_count|default:"0" }}</div>
            <div class="stat-label">Simulations</div>
          </div>
        </div>
      </div>
    {% endif %}

  {% else %}
    <div class="warning-box">
      <svg class="warning-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
      </svg>
      <div>
        <p class="warning-title">Authentication required</p>
        <p class="warning-text">You must be logged in to access the administration panel.</p>
      </div>
    </div>
  {% endif %}
</div>
{% endblock %}