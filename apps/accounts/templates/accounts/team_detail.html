{% extends "core/base.html" %}

{% block content %}
<h1>{{ team.name }}</h1>

<p><strong>Owner:</strong> {{ team.owner.email }}</p>

<h2>Members</h2>
<ul>
  {% for user in members %}
    <li>
      {{ user.email }}
      {% if is_owner and user.id != team.owner_id %}
        <form method="post"
              action="{% url 'accounts:remove_member' team.id %}"
              style="display:inline;">
          {% csrf_token %}
          <input type="hidden" name="user_id" value="{{ user.id }}">
          <button type="submit">Remove</button>
        </form>
      {% endif %}
    </li>
  {% endfor %}
</ul>


{% if is_owner %}
  <h2>Add member</h2>
  <form method="post" action="{% url 'accounts:add_member' team.id %}">
    {% csrf_token %}
    {{ add_member_form.as_p }}
    <button type="submit">Add</button>
  </form>

  <h2>Transfer ownership</h2>
  <form method="post" action="{% url 'accounts:transfer_owner' team.id %}">
    {% csrf_token %}
    {{ transfer_owner_form.as_p }}
    <button type="submit">Transfer</button>
  </form>
{% endif %}
{% endblock %}
