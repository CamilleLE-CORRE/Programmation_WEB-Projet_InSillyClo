{% extends "core/base.html" %}
{% block title %}Publication request {{ req.id }}{% endblock %}

{% block content %}
<h1>Publication request #{{ req.id }}</h1>

<section>
  <h2>Request</h2>
  <ul>
    <li>Status: <strong>{{ req.status }}</strong></li>
    <li>Requested by: {{ req.requested_by }}</li>
    <li>Created at: {{ req.created_at|date:"Y-m-d H:i" }}</li>
    {% if req.team %}
      <li>Team: {{ req.team }}</li>
    {% endif %}
  </ul>
</section>

<section>
  <h2>Target</h2>
  <p>{{ target }}</p>
</section>

{% if plasmids %}
<section>
  <h2>Plasmids in collection</h2>
  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
      </tr>
    </thead>
    <tbody>
      {% for plasmid in plasmids %}
        <tr>
          <td>{{ plasmid.id }}</td>
          <td>{{ plasmid.name }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endif %}

<section>
  <h2>Decision</h2>

  <form method="post" style="margin-bottom: 1rem;">
    {% csrf_token %}
    <input type="hidden" name="action" value="approve">
    <button type="submit">Approve</button>
  </form>

  <form method="post">
    {% csrf_token %}
    <input type="hidden" name="action" value="reject">
    <div>
      <label for="reason">Rejection reason</label><br>
      <textarea name="reason" id="reason" rows="4" cols="60" required></textarea>
    </div>
    <button type="submit">Reject</button>
  </form>
</section>

{% endblock %}
